{"ast":null,"code":"var _jsxFileName = \"/Users/ihsuanhuang/Documents/m3hw/petest/petlove/src/components/Pets/PetDetails.js\",\n    _s = $RefreshSig$();\n\nimport { useContext, useEffect, useState } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { deletePet, getOne } from '../../services/petService';\nimport { PetContext } from '../../context/PetContext';\nimport { AuthContext } from '../../context/AuthContext';\nimport styles from '../Pets/PetDetails.module.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst PetDetails = () => {\n  _s();\n\n  const {\n    currentUser\n  } = useContext(AuthContext);\n  const ctx = useContext(PetContext);\n  const [pet, setPet] = useState({});\n  const [isLiked, setIsLiked] = useState(null);\n  const [confirmDelete, setConfirmDelete] = useState(false);\n  const {\n    petId\n  } = useParams();\n  const navigate = useNavigate();\n  const isOwner = pet.ownerId === (currentUser === null || currentUser === void 0 ? void 0 : currentUser.uid);\n  useEffect(() => {\n    getOne(petId).then(pet => {\n      setPet({\n        id: pet.id,\n        ...pet.data()\n      });\n\n      if (!pet.data().likedBy.includes(currentUser === null || currentUser === void 0 ? void 0 : currentUser.uid)) {\n        setIsLiked(false);\n      } else {\n        setIsLiked(true);\n      }\n    }).catch(error => {\n      console.log(error);\n      navigate('/pets');\n    });\n  }, [ctx, petId, isLiked, currentUser === null || currentUser === void 0 ? void 0 : currentUser.uid]);\n\n  const editHandler = e => {\n    e.preventDefault();\n    navigate(`/pets/${petId}/edit`, {\n      state: { ...pet,\n        id: petId\n      }\n    });\n  };\n\n  const likeHandler = async e => {\n    e.preventDefault();\n\n    if (isLiked) {\n      setIsLiked(false);\n      ctx.unLikePet(pet, currentUser.uid);\n    } else {\n      setIsLiked(true);\n      ctx.likePet(pet, currentUser.uid);\n    }\n  };\n\n  const deleteHandler = e => {\n    e.preventDefault();\n    deletePet(petId);\n    ctx.removePet(petId);\n    navigate('/pets');\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles[\"details\"],\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles[\"img-holder\"],\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: pet.imageUrl,\n          alt: pet.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles[\"description\"],\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: styles[\"card-title\"],\n          children: pet.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: styles[\"desc-paragraph\"],\n          children: pet.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles[\"btn-holder\"],\n          children: [currentUser && !isOwner && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: styles[\"desc-btn\"],\n            onClick: likeHandler,\n            children: isLiked ? \"Liked\" : \"Like\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 29\n          }, this), isOwner && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: styles[\"desc-btn\"],\n            onClick: editHandler,\n            children: [\"Edit\", \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 29\n          }, this), isOwner && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: styles[\"desc-btn-red\"],\n            onClick: deleteHandler,\n            children: \"Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 9\n  }, this);\n};\n\n_s(PetDetails, \"RRo+DjAmiC4S/zhZ9XD3ILNd2kM=\", false, function () {\n  return [useParams, useNavigate];\n});\n\n_c = PetDetails;\nexport default PetDetails;\n\nvar _c;\n\n$RefreshReg$(_c, \"PetDetails\");","map":{"version":3,"names":["useContext","useEffect","useState","useNavigate","useParams","deletePet","getOne","PetContext","AuthContext","styles","PetDetails","currentUser","ctx","pet","setPet","isLiked","setIsLiked","confirmDelete","setConfirmDelete","petId","navigate","isOwner","ownerId","uid","then","id","data","likedBy","includes","catch","error","console","log","editHandler","e","preventDefault","state","likeHandler","unLikePet","likePet","deleteHandler","removePet","imageUrl","name","description"],"sources":["/Users/ihsuanhuang/Documents/m3hw/petest/petlove/src/components/Pets/PetDetails.js"],"sourcesContent":["import { useContext, useEffect, useState } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\n\nimport { deletePet, getOne } from '../../services/petService';\n\nimport { PetContext } from '../../context/PetContext';\nimport { AuthContext } from '../../context/AuthContext';\nimport styles from '../Pets/PetDetails.module.css';\n\n\nconst PetDetails = () => {\n    const { currentUser } = useContext(AuthContext);\n    const ctx = useContext(PetContext);\n\n    const [pet, setPet] = useState({});\n    const [isLiked, setIsLiked] = useState(null);\n    const [confirmDelete, setConfirmDelete] = useState(false);\n\n    const { petId } = useParams();\n\n    const navigate = useNavigate();\n\n\n    const isOwner = pet.ownerId === currentUser?.uid;\n\n\n    useEffect(() => {\n\n        getOne(petId).then((pet) => {\n\n            setPet({ id: pet.id, ...pet.data() });\n\n            if (!pet.data().likedBy.includes(currentUser?.uid)) {\n                setIsLiked(false);\n            } else {\n                setIsLiked(true);\n            }\n\n        }).catch((error) => {\n            console.log(error)\n            navigate('/pets')\n        })\n\n\n    }, [ctx, petId, isLiked, currentUser?.uid]);\n\n\n    const editHandler = (e) => {\n        e.preventDefault();\n\n        navigate(`/pets/${petId}/edit`, {\n            state: { ...pet, id: petId }\n        }\n        )\n    }\n    const likeHandler = async (e) => {\n        e.preventDefault();\n\n        if (isLiked) {\n            setIsLiked(false);\n            ctx.unLikePet(pet, currentUser.uid);\n        } else {\n            setIsLiked(true);\n            ctx.likePet(pet, currentUser.uid);\n        }\n    }\n\n    const deleteHandler = (e) => {\n        e.preventDefault();\n\n        deletePet(petId);\n        ctx.removePet(petId);\n        navigate('/pets')\n    }\n\n\n\n\n\n    return (\n\n        <div className=\"container\">\n            <div className={styles[\"details\"]}>\n                <div className={styles[\"img-holder\"]}>\n                    <img src={pet.imageUrl} alt={pet.name} />\n                </div>\n                <div className={styles[\"description\"]}>\n                    <h4 className={styles[\"card-title\"]}>{pet.name}</h4>\n                    <p className={styles[\"desc-paragraph\"]}>{pet.description}</p>\n                    <div className={styles[\"btn-holder\"]}>\n                        {currentUser && !isOwner && (\n                            <button className={styles[\"desc-btn\"]} onClick={likeHandler}>\n                                {isLiked ? \"Liked\" : \"Like\"}\n                            </button>\n                        )}\n                        {isOwner && (\n                            <button className={styles[\"desc-btn\"]} onClick={editHandler}>\n                                Edit{\" \"}\n                            </button>\n                        )}\n                        {isOwner && (\n                            <button className={styles[\"desc-btn-red\"]} onClick={deleteHandler}>\n                                Delete\n                            </button>\n                        )}\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n\n}\n\n\nexport default PetDetails;"],"mappings":"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"},"metadata":{},"sourceType":"module"}