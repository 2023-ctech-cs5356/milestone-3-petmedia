{"ast":null,"code":"import _regeneratorRuntime from\"/Users/ihsuanhuang/Documents/m3hw/petest/petlove/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/ihsuanhuang/Documents/m3hw/petest/petlove/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/ihsuanhuang/Documents/m3hw/petest/petlove/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/ihsuanhuang/Documents/m3hw/petest/petlove/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/ihsuanhuang/Documents/m3hw/petest/petlove/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useContext}from\"react\";import{useLocation,useNavigate,useParams}from\"react-router-dom\";import{PetContext}from\"../../context/PetContext\";import{AuthContext}from\"../../context/AuthContext\";import inputsData from\"./inputsData\";import InputLogin from\"../InputLogin\";import styles from\"../Pets/EditPet.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditPet=function EditPet(){var location=useLocation();var navigate=useNavigate();var ctx=useContext(PetContext);var _useContext=useContext(AuthContext),currentUser=_useContext.currentUser;var _useParams=useParams(),petId=_useParams.petId;var pets=ctx.pets;var pet=location.state;var correctPet=pets.find(function(pet){return pet.id===petId;});var getInitialState=function getInitialState(){return{name:pet.name,bread:pet.bread,imageUrl:pet.imageUrl,description:pet.description};};var _useState=useState(getInitialState()),_useState2=_slicedToArray(_useState,2),values=_useState2[0],setValues=_useState2[1];var onChange=function onChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setValues(function(prevValues){return _objectSpread(_objectSpread({},prevValues),{},_defineProperty({},name,value));});};var cancelHandler=function cancelHandler(e){e.preventDefault();navigate(\"/pets\");};var isValidUser=function isValidUser(){return currentUser.uid===correctPet.ownerId;};var editPet=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return ctx.updateCurrentPet({id:petId,name:values.name,bread:values.bread,imageUrl:values.imageUrl,description:values.description,likedBy:correctPet.likedBy||[],ownerId:currentUser.uid});case 3:navigate(\"/profile\");_context.next=9;break;case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 9:case\"end\":return _context.stop();}}},_callee,null,[[0,6]]);}));return function editPet(){return _ref.apply(this,arguments);};}();var handlerEditPet=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();if(!(!correctPet||!isValidUser())){_context2.next=4;break;}navigate(\"/pets\");return _context2.abrupt(\"return\");case 4:_context2.next=6;return editPet();case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function handlerEditPet(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\" Edit Pet\"}),/*#__PURE__*/_jsx(\"div\",{className:styles.almub,children:/*#__PURE__*/_jsxs(\"div\",{className:styles[\"wrapper-form\"],children:[/*#__PURE__*/_jsx(\"div\",{className:styles[\"space\"]}),/*#__PURE__*/_jsxs(\"form\",{className:\"grid grid--2-cols grid--center--v\",onSubmit:handlerEditPet,children:[inputsData.map(function(input){return/*#__PURE__*/_jsx(InputLogin,_objectSpread(_objectSpread({},input),{},{value:values[input.name],onChange:onChange}),input.id);}),/*#__PURE__*/_jsx(\"div\",{className:styles[\"btn-form-container\"],children:/*#__PURE__*/_jsx(\"button\",{className:styles[\"cancel-button\"],onClick:cancelHandler,children:\"Cancel\"})}),/*#__PURE__*/_jsx(\"div\",{className:styles[\"btn-form-container\"],children:/*#__PURE__*/_jsx(\"button\",{className:styles[\"submit-button\"],children:\"Edit\"})})]})]})})]});};export default EditPet;","map":{"version":3,"names":["useState","useContext","useLocation","useNavigate","useParams","PetContext","AuthContext","inputsData","InputLogin","styles","EditPet","location","navigate","ctx","currentUser","petId","pets","pet","state","correctPet","find","id","getInitialState","name","bread","imageUrl","description","values","setValues","onChange","e","target","value","prevValues","cancelHandler","preventDefault","isValidUser","uid","ownerId","editPet","updateCurrentPet","likedBy","console","log","handlerEditPet","almub","map","input"],"sources":["/Users/ihsuanhuang/Documents/m3hw/petest/petlove/src/components/Pets/EditPet.js"],"sourcesContent":["import { useState, useContext } from \"react\";\nimport { useLocation, useNavigate, useParams } from \"react-router-dom\";\n\nimport { PetContext } from \"../../context/PetContext\";\nimport { AuthContext } from \"../../context/AuthContext\";\nimport inputsData from \"./inputsData\";\nimport InputLogin from \"../InputLogin\";\nimport styles from \"../Pets/EditPet.module.css\";\n\nconst EditPet = () => {\n  const location = useLocation();\n  const navigate = useNavigate();\n  const ctx = useContext(PetContext);\n  const { currentUser } = useContext(AuthContext);\n  const { petId } = useParams();\n\n  const pets = ctx.pets;\n  const pet = location.state;\n  const correctPet = pets.find((pet) => pet.id === petId);\n\n  const getInitialState = () => {\n    return {\n      name: pet.name,\n      bread: pet.bread,\n      imageUrl: pet.imageUrl,\n      description: pet.description,\n    };\n  };\n\n  const [values, setValues] = useState(getInitialState());\n\n  const onChange = (e) => {\n    const { name, value } = e.target;\n    setValues((prevValues) => ({ ...prevValues, [name]: value }));\n  };\n\n  const cancelHandler = (e) => {\n    e.preventDefault();\n    navigate(\"/pets\");\n  };\n\n  const isValidUser = () => {\n    return currentUser.uid === correctPet.ownerId;\n  };\n\n  const editPet = async () => {\n    try {\n      await ctx.updateCurrentPet({\n        id: petId,\n        name: values.name,\n        bread: values.bread,\n        imageUrl: values.imageUrl,\n        description: values.description,\n        likedBy: correctPet.likedBy || [],\n        ownerId: currentUser.uid,\n      });\n      navigate(\"/profile\");\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const handlerEditPet = async (e) => {\n    e.preventDefault();\n\n    if (!correctPet || !isValidUser()) {\n      navigate(\"/pets\");\n      return;\n    }\n\n    await editPet();\n  };\n  return (\n    <div className=\"container\">\n      <h1> Edit Pet</h1>\n      <div className={styles.almub}>\n        <div className={styles[\"wrapper-form\"]}>\n          <div className={styles[\"space\"]}></div>\n          <form\n            className=\"grid grid--2-cols grid--center--v\"\n            onSubmit={handlerEditPet}\n          >\n            {inputsData.map((input) => (\n              <InputLogin\n                key={input.id}\n                {...input}\n                value={values[input.name]}\n                onChange={onChange}\n              />\n            ))}\n            <div className={styles[\"btn-form-container\"]}>\n              <button\n                className={styles[\"cancel-button\"]}\n                onClick={cancelHandler}\n              >\n                Cancel\n              </button>\n            </div>\n            <div className={styles[\"btn-form-container\"]}>\n              <button className={styles[\"submit-button\"]}>Edit</button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default EditPet;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}