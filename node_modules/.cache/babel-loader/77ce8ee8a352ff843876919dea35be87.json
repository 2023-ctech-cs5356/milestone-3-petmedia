{"ast":null,"code":"var _jsxFileName = \"/Users/ihsuanhuang/Documents/m3hw/petest/petlove/src/components/Pets/PetDetails.js\",\n    _s = $RefreshSig$();\n\nimport { useContext, useEffect, useState } from \"react\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport { deletePet, getOne } from \"../../services/petService\";\nimport { PetContext } from \"../../context/PetContext\";\nimport { AuthContext } from \"../../context/AuthContext\";\nimport styles from \"../Pets/PetDetails.module.css\"; // import styled from \"styled-components\";\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst PetDetails = () => {\n  _s();\n\n  const {\n    currentUser\n  } = useContext(AuthContext);\n  const {\n    petId\n  } = useParams();\n  const navigate = useNavigate();\n  const {\n    likePet,\n    unLikePet,\n    removePet\n  } = useContext(PetContext);\n  const [pet, setPet] = useState({});\n  const [isLiked, setIsLiked] = useState(null);\n  const isOwner = pet.ownerId === (currentUser === null || currentUser === void 0 ? void 0 : currentUser.uid);\n  useEffect(() => {\n    async function fetchPet() {\n      try {\n        const pet = await getOne(petId);\n        setPet({\n          id: pet.id,\n          ...pet.data()\n        });\n        setIsLiked(pet.data().likedBy.includes(currentUser === null || currentUser === void 0 ? void 0 : currentUser.uid));\n      } catch (error) {\n        console.log(error);\n        navigate(\"/pets\");\n      }\n    }\n\n    fetchPet();\n  }, [petId, currentUser === null || currentUser === void 0 ? void 0 : currentUser.uid, navigate]);\n\n  const handleEdit = e => {\n    e.preventDefault();\n    navigate(`/pets/${petId}/edit`, {\n      state: { ...pet,\n        id: petId\n      }\n    });\n  };\n\n  const handleLike = e => {\n    e.preventDefault();\n    const likeAction = isLiked ? unLikePet : likePet;\n    setIsLiked(!isLiked);\n    likeAction(pet, currentUser.uid);\n  };\n\n  const handleDelete = e => {\n    e.preventDefault();\n    deletePet(petId);\n    removePet(petId);\n    navigate(\"/pets\");\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.details,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles[\"img-holder\"],\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: pet.imageUrl,\n          alt: pet.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles[\"description\"],\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: styles[\"card-title\"],\n          children: pet.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: styles[\"desc-paragraph\"],\n          children: pet.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles[\"btn-holder\"],\n          children: [currentUser && !isOwner && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: styles[\"desc-btn\"],\n            onClick: handleLike,\n            children: isLiked ? \"Liked\" : \"Like\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 15\n          }, this), isOwner && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: styles[\"desc-btn\"],\n            onClick: handleEdit,\n            children: [\"Edit\", \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 15\n          }, this), isOwner && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: styles[\"desc-btn-red\"],\n            onClick: handleDelete,\n            children: \"Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this);\n};\n\n_s(PetDetails, \"i4qyu7kTZ/Xxa6w7DEVSTuyHGmQ=\", false, function () {\n  return [useParams, useNavigate];\n});\n\n_c = PetDetails;\nexport default PetDetails;\n\nvar _c;\n\n$RefreshReg$(_c, \"PetDetails\");","map":{"version":3,"names":["useContext","useEffect","useState","useNavigate","useParams","deletePet","getOne","PetContext","AuthContext","styles","PetDetails","currentUser","petId","navigate","likePet","unLikePet","removePet","pet","setPet","isLiked","setIsLiked","isOwner","ownerId","uid","fetchPet","id","data","likedBy","includes","error","console","log","handleEdit","e","preventDefault","state","handleLike","likeAction","handleDelete","details","imageUrl","name","description"],"sources":["/Users/ihsuanhuang/Documents/m3hw/petest/petlove/src/components/Pets/PetDetails.js"],"sourcesContent":["\nimport { useContext, useEffect, useState } from \"react\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport { deletePet, getOne } from \"../../services/petService\";\nimport { PetContext } from \"../../context/PetContext\";\nimport { AuthContext } from \"../../context/AuthContext\";\nimport styles from \"../Pets/PetDetails.module.css\";\n// import styled from \"styled-components\";\n\nconst PetDetails = () => {\n  const { currentUser } = useContext(AuthContext);\n  const { petId } = useParams();\n  const navigate = useNavigate();\n  const { likePet, unLikePet, removePet } = useContext(PetContext);\n  const [pet, setPet] = useState({});\n  const [isLiked, setIsLiked] = useState(null);\n  const isOwner = pet.ownerId === currentUser?.uid;\n\n  useEffect(() => {\n    async function fetchPet() {\n      try {\n        const pet = await getOne(petId);\n        setPet({ id: pet.id, ...pet.data() });\n        setIsLiked(pet.data().likedBy.includes(currentUser?.uid));\n      } catch (error) {\n        console.log(error);\n        navigate(\"/pets\");\n      }\n    }\n    fetchPet();\n  }, [petId, currentUser?.uid, navigate]);\n\n  const handleEdit = (e) => {\n    e.preventDefault();\n    navigate(`/pets/${petId}/edit`, {\n      state: { ...pet, id: petId },\n    });\n  };\n\n  const handleLike = (e) => {\n    e.preventDefault();\n    const likeAction = isLiked ? unLikePet : likePet;\n    setIsLiked(!isLiked);\n    likeAction(pet, currentUser.uid);\n  };\n\n  const handleDelete = (e) => {\n    e.preventDefault();\n    deletePet(petId);\n    removePet(petId);\n    navigate(\"/pets\");\n  };\n\n  return (\n    <div className=\"container\">\n      <div className={styles.details}>\n        <div className={styles[\"img-holder\"]}>\n          <img src={pet.imageUrl} alt={pet.name} />\n        </div>\n        <div className={styles[\"description\"]}>\n          <h4 className={styles[\"card-title\"]}>{pet.name}</h4>\n          <p className={styles[\"desc-paragraph\"]}>{pet.description}</p>\n          <div className={styles[\"btn-holder\"]}>\n            {currentUser && !isOwner && (\n              <button className={styles[\"desc-btn\"]} onClick={handleLike}>\n                {isLiked ? \"Liked\" : \"Like\"}\n              </button>\n            )}\n            {isOwner && (\n              <button className={styles[\"desc-btn\"]} onClick={handleEdit}>\n                Edit{\" \"}\n              </button>\n            )}\n            {isOwner && (\n              <button className={styles[\"desc-btn-red\"]} onClick={handleDelete}>\n                Delete\n              </button>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n\nexport default PetDetails;"],"mappings":"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"},"metadata":{},"sourceType":"module"}