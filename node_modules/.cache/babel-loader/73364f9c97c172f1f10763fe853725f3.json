{"ast":null,"code":"var _jsxFileName = \"/Users/ihsuanhuang/Documents/m3hw/petest/petlove/src/components/Pets/EditPet.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useContext } from \"react\";\nimport { useLocation, useNavigate, useParams } from \"react-router-dom\";\nimport { PetContext } from \"../../context/PetContext\";\nimport { AuthContext } from \"../../context/AuthContext\";\nimport inputsData from \"./inputsData\";\nimport InputLogin from \"../InputLogin\";\nimport styles from \"../Pets/EditPet.module.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst EditPet = () => {\n  _s();\n\n  const location = useLocation();\n  const navigate = useNavigate();\n  const ctx = useContext(PetContext);\n  const {\n    currentUser\n  } = useContext(AuthContext);\n  const {\n    petId\n  } = useParams();\n  const pets = ctx.pets;\n  const pet = location.state;\n  const correctPet = pets.find(pet => pet.id === petId);\n\n  const getInitialState = () => {\n    return {\n      name: pet.name,\n      bread: pet.bread,\n      imageUrl: pet.imageUrl,\n      description: pet.description\n    };\n  };\n\n  const [values, setValues] = useState(getInitialState());\n\n  const onChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setValues(prevValues => ({ ...prevValues,\n      [name]: value\n    }));\n  };\n\n  const cancelHandler = e => {\n    e.preventDefault();\n    navigate(\"/pets\");\n  };\n\n  const isValidUser = () => {\n    return currentUser.uid === correctPet.ownerId;\n  };\n\n  const editPet = async () => {\n    try {\n      await ctx.updateCurrentPet({\n        id: petId,\n        name: values.name,\n        bread: values.bread,\n        imageUrl: values.imageUrl,\n        description: values.description,\n        likedBy: correctPet.likedBy || [],\n        ownerId: currentUser.uid\n      });\n      navigate(\"/profile\");\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const handlerEditPet = async e => {\n    e.preventDefault();\n\n    if (!correctPet || !isValidUser()) {\n      navigate(\"/pets\");\n      return;\n    }\n\n    await editPet();\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \" Edit Pet\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.almub,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles[\"wrapper-form\"],\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles[\"space\"]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"grid grid--2-cols grid--center--v\",\n          onSubmit: handlerEditPet,\n          children: [inputsData.map(input => /*#__PURE__*/_jsxDEV(InputLogin, { ...input,\n            value: values[input.name],\n            onChange: onChange\n          }, input.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 15\n          }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles[\"btn-form-container\"],\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: styles[\"cancel-button\"],\n              onClick: cancelHandler,\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles[\"btn-form-container\"],\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: styles[\"submit-button\"],\n              children: \"Edit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n};\n\n_s(EditPet, \"fGix81Ae2gPjmN+QL/I3BBgrX6w=\", false, function () {\n  return [useLocation, useNavigate, useParams];\n});\n\n_c = EditPet;\nexport default EditPet;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditPet\");","map":{"version":3,"names":["useState","useContext","useLocation","useNavigate","useParams","PetContext","AuthContext","inputsData","InputLogin","styles","EditPet","location","navigate","ctx","currentUser","petId","pets","pet","state","correctPet","find","id","getInitialState","name","bread","imageUrl","description","values","setValues","onChange","e","value","target","prevValues","cancelHandler","preventDefault","isValidUser","uid","ownerId","editPet","updateCurrentPet","likedBy","error","console","log","handlerEditPet","almub","map","input"],"sources":["/Users/ihsuanhuang/Documents/m3hw/petest/petlove/src/components/Pets/EditPet.js"],"sourcesContent":["import { useState, useContext } from \"react\";\nimport { useLocation, useNavigate, useParams } from \"react-router-dom\";\n\nimport { PetContext } from \"../../context/PetContext\";\nimport { AuthContext } from \"../../context/AuthContext\";\nimport inputsData from \"./inputsData\";\nimport InputLogin from \"../InputLogin\";\nimport styles from \"../Pets/EditPet.module.css\";\n\nconst EditPet = () => {\n  const location = useLocation();\n  const navigate = useNavigate();\n  const ctx = useContext(PetContext);\n  const { currentUser } = useContext(AuthContext);\n  const { petId } = useParams();\n\n  const pets = ctx.pets;\n  const pet = location.state;\n  const correctPet = pets.find((pet) => pet.id === petId);\n\n  const getInitialState = () => {\n    return {\n      name: pet.name,\n      bread: pet.bread,\n      imageUrl: pet.imageUrl,\n      description: pet.description,\n    };\n  };\n\n  const [values, setValues] = useState(getInitialState());\n\n  const onChange = (e) => {\n    const { name, value } = e.target;\n    setValues((prevValues) => ({ ...prevValues, [name]: value }));\n  };\n\n  const cancelHandler = (e) => {\n    e.preventDefault();\n    navigate(\"/pets\");\n  };\n\n  const isValidUser = () => {\n    return currentUser.uid === correctPet.ownerId;\n  };\n\n  const editPet = async () => {\n    try {\n      await ctx.updateCurrentPet({\n        id: petId,\n        name: values.name,\n        bread: values.bread,\n        imageUrl: values.imageUrl,\n        description: values.description,\n        likedBy: correctPet.likedBy || [],\n        ownerId: currentUser.uid,\n      });\n      navigate(\"/profile\");\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const handlerEditPet = async (e) => {\n    e.preventDefault();\n\n    if (!correctPet || !isValidUser()) {\n      navigate(\"/pets\");\n      return;\n    }\n\n    await editPet();\n  };\n  return (\n    <div className=\"container\">\n      <h1> Edit Pet</h1>\n      <div className={styles.almub}>\n        <div className={styles[\"wrapper-form\"]}>\n          <div className={styles[\"space\"]}></div>\n          <form\n            className=\"grid grid--2-cols grid--center--v\"\n            onSubmit={handlerEditPet}\n          >\n            {inputsData.map((input) => (\n              <InputLogin\n                key={input.id}\n                {...input}\n                value={values[input.name]}\n                onChange={onChange}\n              />\n            ))}\n            <div className={styles[\"btn-form-container\"]}>\n              <button\n                className={styles[\"cancel-button\"]}\n                onClick={cancelHandler}\n              >\n                Cancel\n              </button>\n            </div>\n            <div className={styles[\"btn-form-container\"]}>\n              <button className={styles[\"submit-button\"]}>Edit</button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default EditPet;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}