{"ast":null,"code":"import _regeneratorRuntime from\"/Users/user/Downloads/petlove-main/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/user/Downloads/petlove-main/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/user/Downloads/petlove-main/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/user/Downloads/petlove-main/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/user/Downloads/petlove-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import{useContext}from\"react\";import{useLocation,useNavigate,useParams}from\"react-router-dom\";import{PetContext}from\"../../context/PetContext\";import{AuthContext}from\"../../context/AuthContext\";import InputLogin from\"../InputLogin\";import styles from\"../Pets/EditPet.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditPet=function EditPet(){var location=useLocation();var navigate=useNavigate();var ctx=useContext(PetContext);var _useContext=useContext(AuthContext),currentUser=_useContext.currentUser;var pets=ctx.pets;var pet=location.state;var inputs=[{id:1,name:\"name\",type:\"text\",errorMessage:\"Cannot be empty\",label:\"Name\",required:true},{id:2,name:\"bread\",type:\"text\",errorMessage:\"Cannot be empty\",label:\"bread\",required:true},{id:3,name:\"imageUrl\",type:\"url\",errorMessage:\"Should be a valid URL\",label:\"imageUrl\",placeholder:\"Image url\",pattern:\"(https://[^\\\"]*?)\",required:true},{id:4,name:\"description\",type:\"text\",errorMessage:\"Should be at least 50 characters\",label:\"description\",required:true}];var _useState=useState({name:pet.name,bread:pet.bread,imageUrl:pet.imageUrl,description:pet.description}),_useState2=_slicedToArray(_useState,2),values=_useState2[0],setValues=_useState2[1];var _useParams=useParams(),petId=_useParams.petId;var correctPet=pets.find(function(pet){return pet.id===petId;});var onChange=function onChange(e){setValues(_objectSpread(_objectSpread({},values),{},_defineProperty({},e.target.name,e.target.value)));};var cancelHandler=function cancelHandler(e){e.preventDefault();navigate(\"/pets\");};var handlerEditPet=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();if(correctPet){_context.next=3;break;}return _context.abrupt(\"return\");case 3:if(!(currentUser.uid!==correctPet.ownerId)){_context.next=6;break;}navigate(\"/pets\");return _context.abrupt(\"return\");case 6:// UPDATE ONE\ntry{ctx.updateCurrentPet({id:petId,name:values.name,bread:values.bread,imageUrl:values.imageUrl,description:values.description,likedBy:correctPet.likedBy||[],ownerId:currentUser.uid});}catch(error){console.log(error);}navigate(\"/profile\");case 8:case\"end\":return _context.stop();}}},_callee);}));return function handlerEditPet(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\" Edit Pet\"}),/*#__PURE__*/_jsx(\"div\",{className:styles.almub,children:/*#__PURE__*/_jsxs(\"div\",{className:styles[\"wrapper-form\"],children:[/*#__PURE__*/_jsx(\"div\",{className:styles[\"space\"]}),/*#__PURE__*/_jsxs(\"form\",{className:\"grid grid--2-cols grid--center--v\",onSubmit:handlerEditPet,children:[inputs.map(function(input){return/*#__PURE__*/_jsx(InputLogin,_objectSpread(_objectSpread({},input),{},{value:values[input.name],onChange:onChange}),input.id);}),/*#__PURE__*/_jsx(\"div\",{className:styles[\"btn-form-container\"],children:/*#__PURE__*/_jsx(\"button\",{className:styles[\"cancel-button\"],onClick:cancelHandler,children:\"Cancel\"})}),/*#__PURE__*/_jsx(\"div\",{className:styles[\"btn-form-container\"],children:/*#__PURE__*/_jsx(\"button\",{className:styles[\"submit-button\"],children:\"Edit\"})})]})]})})]});};export default EditPet;","map":{"version":3,"names":["useState","useContext","useLocation","useNavigate","useParams","PetContext","AuthContext","InputLogin","styles","EditPet","location","navigate","ctx","currentUser","pets","pet","state","inputs","id","name","type","errorMessage","label","required","placeholder","pattern","bread","imageUrl","description","values","setValues","petId","correctPet","find","onChange","e","target","value","cancelHandler","preventDefault","handlerEditPet","uid","ownerId","updateCurrentPet","likedBy","error","console","log","almub","map","input"],"sources":["/Users/user/Downloads/petlove-main/src/components/Pets/EditPet.js"],"sourcesContent":["import { useState } from \"react\";\nimport { useContext } from \"react\";\nimport { useLocation, useNavigate, useParams } from \"react-router-dom\";\n\nimport { PetContext } from \"../../context/PetContext\";\nimport { AuthContext } from \"../../context/AuthContext\";\n\nimport InputLogin from \"../InputLogin\";\nimport styles from \"../Pets/EditPet.module.css\";\n\nconst EditPet = () => {\n\n    const location = useLocation();\n    const navigate = useNavigate();\n    const ctx = useContext(PetContext);\n    const { currentUser } = useContext(AuthContext);\n\n    const pets = ctx.pets;\n    const pet = location.state;\n\n    const inputs = [\n        {\n            id: 1,\n            name: \"name\",\n            type: \"text\",\n            errorMessage: \"Cannot be empty\",\n            label: \"Name\",\n            required: true,\n        },\n        {\n            id: 2,\n            name: \"bread\",\n            type: \"text\",\n            errorMessage: \"Cannot be empty\",\n            label: \"bread\",\n            required: true,\n        },\n        {\n            id: 3,\n            name: \"imageUrl\",\n            type: \"url\",\n            errorMessage: \"Should be a valid URL\",\n            label: \"imageUrl\",\n            placeholder: \"Image url\",\n            pattern: `(https://[^\"]*?\\)`,\n            required: true,\n        },\n        {\n            id: 4,\n            name: \"description\",\n            type: \"text\",\n            errorMessage: \"Should be at least 50 characters\",\n            label: \"description\",\n            required: true,\n        },\n    ];\n\n    const [values, setValues] = useState({\n        name: pet.name,\n        bread: pet.bread,\n        imageUrl: pet.imageUrl,\n        description: pet.description,\n    });\n\n    const { petId } = useParams();\n\n    const correctPet = pets.find((pet) => pet.id === petId);\n\n    const onChange = (e) => {\n        setValues({ ...values, [e.target.name]: e.target.value });\n    };\n\n    const cancelHandler = (e) => {\n        e.preventDefault();\n\n        navigate(\"/pets\");\n    };\n\n    const handlerEditPet = async (e) => {\n        e.preventDefault();\n        if (!correctPet) {\n            return;\n        }\n\n        if (currentUser.uid !== correctPet.ownerId) {\n            navigate(\"/pets\");\n            return;\n        }\n\n        // UPDATE ONE\n        try {\n            ctx.updateCurrentPet({\n                id: petId,\n                name: values.name,\n                bread: values.bread,\n                imageUrl: values.imageUrl,\n                description: values.description,\n                likedBy: correctPet.likedBy || [],\n                ownerId: currentUser.uid,\n            });\n\n        } catch (error) {\n            console.log(error)\n        }\n\n        navigate(\"/profile\");\n    };\n\n    return (\n        <div className=\"container\">\n            <h1> Edit Pet</h1>\n            <div className={styles.almub}>\n                <div className={styles[\"wrapper-form\"]}>\n                    <div className={styles[\"space\"]}></div>\n                    <form className=\"grid grid--2-cols grid--center--v\" onSubmit={handlerEditPet}>\n                        {inputs.map((input) => (\n                            <InputLogin\n                                key={input.id}\n                                {...input}\n                                value={values[input.name]}\n                                onChange={onChange}\n                            />\n                        ))}\n                        <div className={styles[\"btn-form-container\"]}>\n                            <button className={styles[\"cancel-button\"]} onClick={cancelHandler}>\n                                Cancel\n                            </button>\n                        </div>\n                        <div className={styles[\"btn-form-container\"]}>\n                            <button className={styles[\"submit-button\"]}>Edit</button>\n                        </div>\n                    </form>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default EditPet;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}