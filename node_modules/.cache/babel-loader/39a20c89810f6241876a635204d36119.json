{"ast":null,"code":"import _slicedToArray from\"/Users/ihsuanhuang/Documents/m3hw/petest/petlove/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"/Users/ihsuanhuang/Documents/m3hw/petest/petlove/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// import from react\nimport{createContext,useEffect,useReducer}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";var initialState={currentUser:JSON.parse(localStorage.getItem(\"user\"))||null};export var AuthContext=/*#__PURE__*/createContext(initialState);// reducer function to manage the state of the authentication context\nfunction authReducer(state,action){// different logging cases\nswitch(action.type){case\"LOGIN\":return _objectSpread(_objectSpread({},state),{},{currentUser:action.payload});case\"LOGOUT\":return _objectSpread(_objectSpread({},state),{},{currentUser:null});case\"REGISTER\":return _objectSpread(_objectSpread({},state),{},{currentUser:action.payload});default:return state;}}// provide an authentication context for the children components\nexport function AuthContextProvider(_ref){var children=_ref.children;// hook to manage the authentication state and dispatch actions\nvar _useReducer=useReducer(authReducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];// used to persist the currentUser object in local storage whenever it changes\nuseEffect(function(){localStorage.setItem(\"user\",JSON.stringify(state.currentUser));},[state.currentUser]);// contains the 'currentUser' state and 'dispatch' method\nvar authContextValue={currentUser:state.currentUser,dispatch:dispatch};// return\nreturn/*#__PURE__*/_jsx(AuthContext.Provider,{value:authContextValue,children:children});}","map":{"version":3,"names":["createContext","useEffect","useReducer","initialState","currentUser","JSON","parse","localStorage","getItem","AuthContext","authReducer","state","action","type","payload","AuthContextProvider","children","dispatch","setItem","stringify","authContextValue"],"sources":["/Users/ihsuanhuang/Documents/m3hw/petest/petlove/src/context/AuthContext.js"],"sourcesContent":["// import from react\nimport { createContext, useEffect, useReducer } from \"react\";\n\nconst initialState = {\n    currentUser: JSON.parse(localStorage.getItem(\"user\")) || null,\n  };\n  \nexport const AuthContext = createContext(initialState);\n\n// reducer function to manage the state of the authentication context\nfunction authReducer(state, action) {\n  \n  // different logging cases\n  switch (action.type) {\n    case \"LOGIN\":\n        return { ...state, currentUser: action.payload };\n    case \"LOGOUT\":\n        return { ...state, currentUser: null };\n    case \"REGISTER\": \n        return {...state, currentUser: action.payload,};\n    default:\n        return state;\n    }\n  }\n  \n  // provide an authentication context for the children components\n  export function AuthContextProvider({ children }) {\n\n    // hook to manage the authentication state and dispatch actions\n    const [state, dispatch] = useReducer(authReducer, initialState);\n  \n    // used to persist the currentUser object in local storage whenever it changes\n    useEffect(() => {\n      localStorage.setItem(\"user\", JSON.stringify(state.currentUser));\n    }, [state.currentUser]);\n  \n    // contains the 'currentUser' state and 'dispatch' method\n    const authContextValue = {\n      currentUser: state.currentUser,\n      dispatch,\n    };\n  \n    // return\n    return (\n      <AuthContext.Provider value={authContextValue}>\n        {children}\n      </AuthContext.Provider>\n    );\n  }\n"],"mappings":"2QAAA;AACA,OAASA,aAAT,CAAwBC,SAAxB,CAAmCC,UAAnC,KAAqD,OAArD,C,2CAEA,GAAMC,aAAY,CAAG,CACjBC,WAAW,CAAEC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,GAA4C,IADxC,CAArB,CAIA,MAAO,IAAMC,YAAW,cAAGT,aAAa,CAACG,YAAD,CAAjC,CAEP;AACA,QAASO,YAAT,CAAqBC,KAArB,CAA4BC,MAA5B,CAAoC,CAElC;AACA,OAAQA,MAAM,CAACC,IAAf,EACE,IAAK,OAAL,CACI,sCAAYF,KAAZ,MAAmBP,WAAW,CAAEQ,MAAM,CAACE,OAAvC,GACJ,IAAK,QAAL,CACI,sCAAYH,KAAZ,MAAmBP,WAAW,CAAE,IAAhC,GACJ,IAAK,UAAL,CACI,sCAAWO,KAAX,MAAkBP,WAAW,CAAEQ,MAAM,CAACE,OAAtC,GACJ,QACI,MAAOH,MAAP,CARN,CAUC,CAED;AACA,MAAO,SAASI,oBAAT,MAA2C,IAAZC,SAAY,MAAZA,QAAY,CAEhD;AACA,gBAA0Bd,UAAU,CAACQ,WAAD,CAAcP,YAAd,CAApC,4CAAOQ,KAAP,iBAAcM,QAAd,iBAEA;AACAhB,SAAS,CAAC,UAAM,CACdM,YAAY,CAACW,OAAb,CAAqB,MAArB,CAA6Bb,IAAI,CAACc,SAAL,CAAeR,KAAK,CAACP,WAArB,CAA7B,EACD,CAFQ,CAEN,CAACO,KAAK,CAACP,WAAP,CAFM,CAAT,CAIA;AACA,GAAMgB,iBAAgB,CAAG,CACvBhB,WAAW,CAAEO,KAAK,CAACP,WADI,CAEvBa,QAAQ,CAARA,QAFuB,CAAzB,CAKA;AACA,mBACE,KAAC,WAAD,CAAa,QAAb,EAAsB,KAAK,CAAEG,gBAA7B,UACGJ,QADH,EADF,CAKD"},"metadata":{},"sourceType":"module"}