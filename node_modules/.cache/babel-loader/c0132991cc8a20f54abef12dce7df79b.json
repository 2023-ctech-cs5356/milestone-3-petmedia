{"ast":null,"code":"import _regeneratorRuntime from\"/Users/ihsuanhuang/Documents/m3hw/petest/petlove/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/ihsuanhuang/Documents/m3hw/petest/petlove/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/ihsuanhuang/Documents/m3hw/petest/petlove/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useContext,useState,useEffect}from\"react\";import{AuthContext}from\"../context/AuthContext\";import{PetContext}from\"../context/PetContext\";import PetItem from\"./Pets/PetItem\";import styles from\"../components/Profile.module.css\";import{Oval}from\"react-loader-spinner\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Profile=function Profile(){var _useContext=useContext(AuthContext),currentUser=_useContext.currentUser;var _useContext2=useContext(PetContext),pets=_useContext2.pets;var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),userPets=_useState4[0],setUserPets=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),likedPets=_useState6[0],setLikedPets=_useState6[1];useEffect(function(){var fetchUserPets=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var userPetsList,likedPetsList;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:userPetsList=pets.filter(function(pet){return pet.ownerId===currentUser.uid;});likedPetsList=pets.filter(function(pet){return pet.likedBy.includes(currentUser.uid);});setUserPets(userPetsList);setLikedPets(likedPetsList);setIsLoading(false);case 5:case\"end\":return _context.stop();}}},_callee);}));return function fetchUserPets(){return _ref.apply(this,arguments);};}();setTimeout(function(){fetchUserPets();},3000);},[pets,currentUser.uid]);return/*#__PURE__*/_jsxs(\"section\",{className:styles.sectionProfile,style:{backgroundColor:\"#ffd4e1\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.userEmail,children:[\"Hello \",currentUser.email]}),/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(Oval,{height:90,width:90,color:\"#fff\",wrapperClass:\"loader\",visible:isLoading,ariaLabel:\"oval-loading\",secondaryColor:\"#fff\",strokeWidth:2,strokeWidthSecondary:2}),!isLoading&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h3\",{className:styles.breedsWrapperTitle,children:[\"You listed \",userPets.length,\" Pets\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid--2-cols card-grid-wrapper\",children:userPets.length>0?userPets.map(function(pet){return/*#__PURE__*/_jsx(PetItem,{pet:pet,index:pets.indexOf(pet)},pet.id);}):/*#__PURE__*/_jsx(\"h2\",{children:\"No pets found.\"})}),/*#__PURE__*/_jsxs(\"h3\",{className:styles.breedsWrapperTitle,children:[\"You liked \",likedPets.length,\" Pets\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid--2-cols card-grid-wrapper\",children:likedPets.length>0?likedPets.map(function(pet){return/*#__PURE__*/_jsx(PetItem,{pet:pet,index:pets.indexOf(pet)},pet.id);}):/*#__PURE__*/_jsx(\"h2\",{children:\"No pets found.\"})})]})]})]});};export default Profile;","map":{"version":3,"names":["useContext","useState","useEffect","AuthContext","PetContext","PetItem","styles","Oval","Profile","currentUser","pets","isLoading","setIsLoading","userPets","setUserPets","likedPets","setLikedPets","fetchUserPets","userPetsList","filter","pet","ownerId","uid","likedPetsList","likedBy","includes","setTimeout","sectionProfile","backgroundColor","userEmail","email","breedsWrapperTitle","length","map","indexOf","id"],"sources":["/Users/ihsuanhuang/Documents/m3hw/petest/petlove/src/components/Profile.js"],"sourcesContent":["import { useContext, useState, useEffect } from \"react\";\n\nimport { AuthContext } from \"../context/AuthContext\";\nimport { PetContext } from \"../context/PetContext\";\nimport PetItem from \"./Pets/PetItem\";\n\nimport styles from \"../components/Profile.module.css\"\nimport { Oval } from \"react-loader-spinner\";\n\nconst Profile = () => {\nconst { currentUser } = useContext(AuthContext);\nconst { pets } = useContext(PetContext);\n\nconst [isLoading, setIsLoading] = useState(true);\nconst [userPets, setUserPets] = useState([]);\nconst [likedPets, setLikedPets] = useState([]);\n\nuseEffect(() => {\n    const fetchUserPets = async () => {\n    const userPetsList = pets.filter((pet) => pet.ownerId === currentUser.uid);\n    const likedPetsList = pets.filter((pet) => pet.likedBy.includes(currentUser.uid));\n    setUserPets(userPetsList);\n    setLikedPets(likedPetsList);\n    setIsLoading(false);\n    };\n\n    setTimeout(() => {\n    fetchUserPets();\n    }, 3000);\n}, [pets, currentUser.uid]);\n\n\nreturn (\n    <section className={styles.sectionProfile} style={{ backgroundColor: \"#ffd4e1\" }}>\n      <div className={styles.userEmail}>Hello {currentUser.email}</div>\n      <div className=\"container\">\n        <Oval\n          height={90}\n          width={90}\n          color=\"#fff\"\n          wrapperClass=\"loader\"\n          visible={isLoading}\n          ariaLabel=\"oval-loading\"\n          secondaryColor=\"#fff\"\n          strokeWidth={2}\n          strokeWidthSecondary={2}\n        />\n\n        {!isLoading && (\n          <>\n            <h3 className={styles.breedsWrapperTitle}>\n              You listed {userPets.length} Pets\n            </h3>\n            <div className=\"grid grid--2-cols card-grid-wrapper\">\n              {userPets.length > 0 ? (\n                userPets.map((pet) => (\n                  <PetItem key={pet.id} pet={pet} index={pets.indexOf(pet)} />\n                ))\n              ) : (\n                <h2>No pets found.</h2>\n              )}\n            </div>\n            <h3 className={styles.breedsWrapperTitle}>\n              You liked {likedPets.length} Pets\n            </h3>\n            <div className=\"grid grid--2-cols card-grid-wrapper\">\n              {likedPets.length > 0 ? (\n                likedPets.map((pet) => (\n                  <PetItem key={pet.id} pet={pet} index={pets.indexOf(pet)} />\n                ))\n              ) : (\n                <h2>No pets found.</h2>\n              )}\n            </div>\n          </>\n        )}\n      </div>\n    </section>\n  );\n};\n\nexport default Profile;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}